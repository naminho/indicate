!function(t){"object"==typeof module&&"object"==typeof module.exports?t(require("jquery"),window,document):t(jQuery,window,document)}(function(t,e,o,i){t.fn.indicate=function(i){function s(e,o,i,s,r,n,a,l,d){console.log("scroll");var f=o.data("settings"),c=o.width(),h=Math.max(i.width(),i.get(0).scrollWidth),g=0;e&&!a&&(g=t(i.contents()).scrollLeft()),e||(g=o.scrollLeft()),e&&a&&(g=l),e&&!a&&x()&&(g=o.scrollLeft()),e&&!a&&(h=t(i.contents()).width()),e&&a&&(h=d),g>f.fadeOffset?(r.show(),r.removeClass("hide-left"),f.arrows&&(s.left.show(),s.left.removeClass("hide-left"))):(r.addClass("hide-left"),f.arrows&&s.left.addClass("hide-left")),g+c+f.fadeOffset<h?(n.show(),n.removeClass("hide-right"),f.arrows&&(s.right.show(),s.right.removeClass("hide-right"))):(n.addClass("hide-right"),f.arrows&&s.right.addClass("hide-right"))}function r(e,o,i,s,r,n,a){var l,d=e.data("settings"),f=e.width(),c=Math.max(o.width(),o.get(0).scrollWidth);a&&e.data("width")&&(c=Math.max(e.data("width"),c)),n&&!a&&(c=t(o.contents()).width()),x()&&n&&(c=t(o.contents()).get(0).documentElement.width),f>=c?(i.hide(),s.hide(),r.both.hide(),e.css("white-space","normal")):(e.css("white-space","nowrap"),l=n&&!a?t(o.contents()).scrollLeft():e.scrollLeft(),s.show(),d.arrows&&r.right.show(),l>d.fadeOffset&&(i.show(),d.arrows&&r.left.show()))}function n(e,o,i,s,r){var n,a=i.data("settings"),l=i.width();!o||o&&x()?n=i.scrollLeft():r||(n=t(s.contents()).scrollLeft());var d=l/a.scrollDenominator;if(!o||o&&x())"left"===e?i.animate({scrollLeft:n-d},300):i.animate({scrollLeft:n+d},300);else if(r){var f=JSON.stringify({dir:e,scrollDenominator:a.scrollDenominator});t("iframe",i).get(0).contentWindow.postMessage(f,"*")}else"left"===e?s.contents().find("body").animate({scrollLeft:n-d},300):s.contents().find("body").animate({scrollLeft:n+d},300)}function a(e,o,i,s,r,a){var l,d,f,c,h,g=r.data("settings"),p='<div class="arrow-left '+e+'"><svg width="14" height="24" xmlns="http://www.w3.org/2000/svg"><polyline fill="none" stroke="'+g.arrowColor+'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="12,22 2,12 12,2 "/></svg></div>',u='<div class="arrow-right '+e+'"><svg width="14" height="24" xmlns="http://www.w3.org/2000/svg"><polyline fill="none" stroke="'+g.arrowColor+'" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="2,22 12,12 2,2 "/></svg></div>';return o.append(p),o.append(u),l=t(".arrow-left."+e,o),d=t(".arrow-right."+e,o),f=l.add(d),c={width:"50px",height:"100%",position:"absolute",top:"0","z-index":"2"},h={width:"14px",height:"24px","margin-top":"10px","transition-property":"all","transition-duration":"200ms","transition-timing-function":"ease"},l.css(c).css("display","none"),d.css(c).css("right","0"),l.find("svg").css(h).css("margin-left","2px"),d.find("svg").css(h).css("margin-right","2px").css({position:"absolute",right:"0"}),f.hover(function(){"2px"===t(this).find("svg").css("margin-right")?d.find("svg").css("margin-right","6px"):l.find("svg").css("margin-left","6px")},function(){"6px"===t(this).find("svg").css("margin-right")?d.find("svg").css("margin-right","2px"):l.find("svg").css("margin-left","2px")}),l.click(function(){n("left",s,r,a,i)}),d.click(function(){n("right",s,r,a,i)}),{both:f,left:l,right:d}}function l(e){var o=d(e);if(o.settings.adaptToContentHeight)if(o.isIframe)if(o.usePostMessage){o.contentWrapper.data("height")}else e.load(function(){e.animate({height:t(e).contents().height()},300)});else console.log("TODO"),console.log(e.height())}function d(e){var o=e.parent().parent();return{pluginWrapper:o,contentWrapper:e.parent(),element:e,fade:{left:t(".fade-left",o),right:t(".fade-right",o)},arrow:{left:t(".arrow-left",o),right:t(".arrow-right",o),both:t(".arrow-left",o).add(t(".arrow-right",o))},isIframe:"iframe"===e.prop("tagName").toLowerCase(),usePostMessage:"iframe"===e.prop("tagName").toLowerCase()&&p(e),settings:e.parent().data("settings"),uniqueIdentifier:e.parent().data("uniqueIdentifier")}}function f(e){return e?e.parent().hasClass("content-wrapper"):t(this).parent().hasClass("content-wrapper")}function c(t){return t.split("/")[0]}function h(t){return t.split("/")[2]}function g(t){var e=t.split(".");return e[e.length-2]+"."+e[e.length-1]}function p(t){var e=t.attr("src"),i=c(e),s=h(e);if(location.protocol!=i||location.host!=s){var r=g(s);if(console.log(o.domain+" != "+r+(o.domain!=r)),o.domain!=r)return!0;o.domain=r}return!1}function u(t,e){return Math.floor(Math.random()*(e-t+1))+t}function w(t){for(var e,o=t;o=o.parent();)if(!m(e=o.css("background-color")))return console.log(e),e}function m(t){return"rgba(0, 0, 0, 0)"===t||"transparent"===t}function v(){var t=e.navigator.userAgent,o=t.indexOf("MSIE ");if(o>0)return parseInt(t.substring(o+5,t.indexOf(".",o)),10);var i=t.indexOf("Trident/");if(i>0){var s=t.indexOf("rv:");return parseInt(t.substring(s+3,t.indexOf(".",s)),10)}var r=t.indexOf("Edge/");return r>0?parseInt(t.substring(r+5,t.indexOf(".",r)),10):!1}function x(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;t.length;)if(navigator.platform===t.pop())return!0;return!1}if(0!==this.length)return t("head #scroll-indicator-animations").length||t('<style id="scroll-indicator-animations"><!-- inject css here --></style>').appendTo("head"),this.each(function(){var n,c,h,g,m,b,C,L,O,W,y=!1;if(f())return console.log("updating settings"),L=t(this).parent(),O=t(this).parent().parent(),g=t(".fade-left",O),h=t(".fade-right",O),m={left:t(".arrow-left",O),right:t(".arrow-right",O)},m.both=m.left.add(m.right),b="iframe"===t(this).prop("tagName").toLowerCase(),b&&(y=p(t(this))),n=L.data("settings"),n=t.extend({},n,i),L.data("settings",n),W=L.data("uniqueIdentifier"),g.css("box-shadow","0 0 "+n.fadeWidth+" "+n.fadeWidth+" "+n.color),h.css("box-shadow","0 0 "+n.fadeWidth+" "+n.fadeWidth+" "+n.color),n.maxHeight&&L.css("max-height",n.maxHeight),n.arrows?m.both.length<2&&a(W,O,y,b,L,t(this)):m.both.hide(),s(b,L,t(this),m,g,h,y),void r(L,t(this),g,h,m,b,y);W="i_"+u(1,999),console.log(W),c=t(this),c.css("width","100%"),c.wrap('<div class="scroll-indicator plugin-wrapper '+W+'"><div class="content-wrapper '+W+'"></div><div class="fade-left '+W+'"></div><div class="fade-right '+W+'"></div></div>'),O=t(".plugin-wrapper."+W,c.parent().parent().parent()),L=t(".content-wrapper."+W,O),g=t(".fade-left."+W,O),h=t(".fade-right."+W,O),n=t.extend({},t.fn.indicate.defaults,i),L.data("settings",n),L.data("uniqueIdentifier",W),C=c.prop("tagName").toLowerCase(),b="iframe"===c.prop("tagName").toLowerCase(),n.color||(n.color=w(c),n.color||(n.color=n.defaultColor)),console.log(n.color),n.maxHeight&&L.css("max-height",n.maxHeight),b&&(y=p(c)),O.css({position:"relative",overflow:"hidden"}),L.css({overflow:"auto","-ms-overflow-style":"none"}),L.css("-webkit-overflow-scrolling","touch","important"),L.css("overflow","auto","important");var k={"z-index":"1",width:"0px",height:"100%",position:"absolute",top:"0"},I={"box-shadow":"0 0 "+n.fadeWidth+" calc("+n.fadeWidth+" * 1.2) "+n.color};if(v()&&(I["box-shadow"]="0 0 "+n.fadeWidth+" "+n.fadeWidth+" "+n.color),g.css(k).css("left","0").css(I).css("display","none"),h.css(k).css("right","0").css(I),n.arrows&&(m=a(W,O,y,b,L,c)),n.adaptToContentHeight&&l(c),L.attr("unselectable","on").css("user-select","none").on("selectstart",!1),t(e).on("resize",function(){console.log("resize"),r(L,c,g,h,m,b,y)}),b)if(console.log("is iframe"),y){console.log("postmessage");c.attr("src");e.addEventListener("message",function(e){for(var i,r=o.getElementsByTagName("iframe"),n=0;n<r.length;n++)r[n].contentWindow===e.source&&(i=r[n]);if(t(i).prop("tagName")){var a=d(t(i)),l=JSON.parse(e.data);L.data("width",l.width),L.data("height",l.height),s(a.isIframe,a.contentWrapper,a.element,a.arrow,a.fade.left,a.fade.right,a.usePostMessage,l.offset,l.width)}},!1),L.on("scroll",function(){if(console.log(x()+"isiOS"),x()){var t=L.data("width");s(b,L,c,m,g,h,y,L.scrollLeft(),t-50)}else s(b,L,c,m,g,h,y)})}else console.log("no postmessage"),c.load(function(){x()?L.on("scroll",function(){s(b,L,c,m,g,h,y)}):t(c.contents()).scroll(function(){s(b,L,c,m,g,h,y)}),s(b,L,c,m,g,h,y),r(L,c,g,h,m,b,y)});else console.log("no iframe"),L.on("scroll",function(){if(console.log(x()+"isiOS"),x()){var t=L.data("width");s(b,L,c,m,g,h,y,L.scrollLeft(),t-50)}else s(b,L,c,m,g,h,y)});s(b,L,c,m,g,h,y),r(L,c,g,h,m,b,y)}),this},t.fn.indicate.defaults={scrollDenominator:5,defaultColor:"#FFFFFF",arrows:!0,fadeWidth:"20px",arrowColor:"#000000",fadeOffset:5,adaptToContentHeight:!0}});