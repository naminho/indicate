/* jQuery Scroll Indicator 2016 by Matthias Giger */
!function(t){t.fn.indicate=function(i){function e(i,e,s,r,o,n,a){var l=i.width(),c=e.width();if(n&&!a&&(c=t(e.contents()).width()),l>=c)s.hide(),r.hide(),o.both.hide();else{if(n&&!a)var d=t(e.contents()).scrollLeft();else var d=i.scrollLeft();r.show(),o.right.show(),d>25&&(o.left.show(),s.show())}}function s(i,e,s,r,o,n,a,l,c){var d=e.data("settings"),h=e.width(),f=s.width();if(i&&!a)var g=t(s.contents()).scrollLeft();if(!i)var g=e.scrollLeft();if(i&&a)var g=l;i&&!a&&(f=t(s.contents()).width()),i&&a&&(f=c),g>25?(o.show(),!a&&d.arrows&&r.left.show()):(o.hide(),!a&&d.arrows&&r.left.hide()),f>g+h+25?(n.show(),!a&&d.arrows&&r.right.show()):(n.hide(),!a&&d.arrows&&r.right.hide())}function r(i,e,s,r){var o=s.data("settings"),n=s.width();r.width();if(e)var a=t(r.contents()).scrollLeft();else var a=s.scrollLeft();var l=n/o.scrollDenominator;e?"left"===i?r.contents().scrollLeft(a-l):r.contents().scrollLeft(a+l):"left"===i?s.animate({scrollLeft:a-l},300):s.animate({scrollLeft:a+l},300)}function o(i,e,s,o,n,a,l){var c='<div class="arrow-left '+i+'"><svg width="14" height="24" xmlns="http://www.w3.org/2000/svg"><polyline fill="none" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="12,22 2,12 12,2 "/></svg></div>',d='<div class="arrow-right '+i+'"><svg width="14" height="24" xmlns="http://www.w3.org/2000/svg"><polyline fill="none" stroke="#666666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" points="2,22 12,12 2,2 "/></svg></div>';e.append(c),e.append(d);var h={width:"50px",height:"100%",position:"absolute",top:"0","z-index":"120"},f={width:"14px",height:"24px","margin-top":"10px"},g=t(".arrow-left."+i,l).css(h).css("display","none"),w=t(".arrow-right."+i,l).css(h).css("right","0");g.find("svg").css(f).css("margin-left","2px"),w.find("svg").css(f).css("margin-right","2px").css({position:"absolute",right:"0"});var p=g.add(w);return p.hover(function(){"2px"===t(this).find("svg").css("margin-right")?w.find("svg").css("margin-right","6px"):g.find("svg").css("margin-left","6px")},function(){"6px"===t(this).find("svg").css("margin-right")?w.find("svg").css("margin-right","2px"):g.find("svg").css("margin-left","2px")}),g.click(function(){s||r("left",o,n,a)}),w.click(function(){s||r("right",o,n,a)}),{both:p,left:g,right:w}}function n(t){var i=t.split("/");return i[0]}function a(t){var i=t.split("/");i[0];return i[2]}function l(t){var i=t.split(".");return i[i.length-2]+"."+i[i.length-1]}function c(t){var i=t.attr("src"),e=n(i),s=a(i);document.location.hostname;if(location.protocol!=e||location.host!=s){console.warn(location.host+" != "+s),console.warn("indicate will only work on iframes with the same origin.");var r=l(s);if(console.log(document.domain+" != "+r),document.domain!=r)return!0;document.domain=r}return!1}function d(t,i){return Math.floor(Math.random()*(i-t+1))+t}if(0!==this.length)return this.each(function(r){var n,l,h,f,g,w,p,v,u,m,x,L=!1;if(t(this).parent().hasClass("content-wrapper"))return u=t(this).parent(),m=t(this).parent().parent(),n=u.data("settings"),n=t.extend({},n,i),u.data("settings",n),x=u.data("uniqueIdentifier"),t(".fade-left",m).css("box-shadow","0 0 "+n.fadeWidth+" "+n.fadeWidth+" "+n.color),t(".fade-right",m).css("box-shadow","0 0 "+n.fadeWidth+" "+n.fadeWidth+" "+n.color),void(n.arrows?(l=t(this),w={left:t(".arrow-left",m),right:t(".arrow-right",m)},w.both=w.left.add(w.right),g=t(".arrow-left",m),f=t(".arrow-right",m),p="iframe"===l.prop("tagName").toLowerCase(),p&&(L=c(l)),"none"===w.left.css("display")&&e(u,l,g,f,w,p,L),n.arrows&&(s(p,u,l,w,g,f,L),e(u,l,g,f,w,p,L))):(t(".arrow-left",m).hide(),t(".arrow-right",m).hide()));x="i_"+d(1,999),l=t(this),l.css("width","100%"),l.wrap('<div class="scroll-indicator plugin-wrapper '+x+'"><div class="content-wrapper '+x+'"></div><div class="fade-left '+x+'"></div><div class="fade-right '+x+'"></div></div>'),m=t(".plugin-wrapper."+x,l.parent().parent().parent()),u=t(".content-wrapper."+x,m),g=t(".fade-left."+x,m),f=t(".fade-right."+x,m),n=t.extend({},t.fn.indicate.defaults,i),u.data("settings",n),u.data("uniqueIdentifier",x),v=l.prop("tagName").toLowerCase(),p="iframe"===l.prop("tagName").toLowerCase(),n.maxHeight&&u.css("max-height",n.maxHeight),p&&(L=c(l)),m.css({position:"relative",overflow:"hidden"}),u.css({position:"relative","overflow-x":"auto"});var k={"z-index":"1",width:"0px",height:"100%",position:"absolute",top:"0"},b={"box-shadow":"0 0 "+n.fadeWidth+" "+n.fadeWidth+" "+n.color};if(g.css(k).css("left","0").css(b).css("display","none"),f.css(k).css("right","0").css(b),n.arrows&&(w=o(x,m,L,p,u,l,h)),u.attr("unselectable","on").css("user-select","none").on("selectstart",!1),t(window).on("resize",function(){e(u,l,g,f,w,p,L)}),p&&!L?setTimeout(function(){t(l.contents()).scroll(function(){s(p,u,l,w,g,f,L)}),e(u,l,g,f,w,p,L)},3e3):u.on("scroll",function(){s(p,u,l,w,g,f,L)}),L){var y=l.attr("src"),W=a(y);t.receiveMessage(function(t){var i=JSON.parse(t.data);s(p,u,l,w,g,f,L,i.offset,i.width)},"http://"+W)}e(u,l,g,f,w,p,L)}),this},t.fn.indicate.defaults={scrollDenominator:3,color:"#FFFFFF",arrows:!0,fadeWidth:"20px"}}(jQuery);
